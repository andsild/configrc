# This is an example file that works with this setup. You should change the
# stuff in <angle brackets>, but keep everything else as is. I've added
# comments to clarify different bits

# General offlineimap configuration
[general]

# Accounts available, separated by comma. Change to whatever you want.
accounts = Posteo, Cxense
# accounts = Work, Personal

# Use the command-line interface. We don't need something fancy
ui = TTY.TTYUI

# A bunch of python functions that are used here.
pythonfile = ~/.mutt/support/offlineimap.py

# Speeds things up. It's OK to loose a mail every now and then, it will get synced next time
fsync = False
                                                                
# A single account. You can define multiple ones (having different names), but
# you need to list them in [general]                            
[Account Posteo]                                                       
localrepository = posteo-Local                                 
remoterepository = posteo-Remote                               
postsynchook = notmuch new                                      

[Account Cxense]                                                       
localrepository = cxense-Local                                 
remoterepository = cxense-Remote                               
postsynchook = notmuch new                                      

[Repository posteo-Local]                                      
type = Maildir                                                  
localfolders = /extra/.mail/posteo/
nametrans = posteo_local_to_remote_nametrans()

# Gmail folders have long annoying names (like "[Gmail]/All Mail"), so they
# should be renamed locally. This function takes an optional hash with
# mappings. You can leave it empty if you don't need more than the default
# folders.
# nametrans = gmail_local_to_remote_nametrans({})

[Repository posteo-Remote]
maxconnections = 2
type = IMAP                                                     
remotehost = posteo.net
remoteuser = andsild@posteo.net
remoteport = 143
ssl = no
# ugh. don't get whats going on
starttls = yes 
remotepasseval = keychain_pass_posteo()
createfolders = False
sslcacertfile = /etc/ssl/certs/ca-bundle.crt
realdelete = yes                                                
nametrans = lambda folder: str.lower(folder)


[Repository cxense-Local]                                      
type = Maildir                                                  
localfolders = /extra/.mail/cxense

[Repository cxense-Remote]
maxconnections = 2
type = Gmail
remotehost = imap.gmail.com
remoteuser = anders.sildnes@cxense.com
remoteport = 993
ssl = yes
remotepasseval = keychain_pass_cxense()
nametrans = gmail_remote_to_local_nametrans()
createfolders = False
folderfilter = gmail_folder_filter({})
sslcacertfile = /etc/ssl/certs/ca-bundle.crt
realdelete = yes                                    
folderfilter = lambda folder: folder not in ['[Gmail]/Cron', '[Gmail]/dc-ops', '[Gmail]/security', '[Gmail]/Important', '[Gmail]/Cxad', '[Gmail]/All Mail']
