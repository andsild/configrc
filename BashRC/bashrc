# test -f /local/skel/all.bashrc && . /local/skel/all.bashrc
# If not running interactively, don't read preferences.
[ -z "$PS1" ] && return

export EIX_LIMIT=0

# Variables ##
#TODO: put amount of files in dir in PS1
export DEFAULT="\[\e[00m\]"
# PS1='\u@\h: ~${PWD##*/} > '
PS1='\u@\h: ../${PWD##*/} `if [ \$? = 0 ]; then printf "%s" "\e[01;32m:)"; else printf "%s" "\e[01;31m:("; fi`\[\e[00m\]\n$ '
EDITOR="gvim"
HISTIGNORE="ls:l:clear"
PATH="${PATH}:${HOME}/dotfiles/Bash:$GOROOT/bin:$GOPATH/bin"

export HISTCONTROL="ignoredups"

# Disable Software Flow Control (xon) 
# (in practice: give me back Ctrl+s and Ctrl+q)
stty -ixon

# XMonad needs this to run java nicely
export _JAVA_AWT_WM_NONREPARENTING=1 

# My jedi-vim needs this(ugh!)
export IPYTHONDIR="~/.ipython"


# It's a lot more annoying to not have an old command in history than having a large file
export HISTSIZE=10000		
export HISTFILE_SIZE=10000


# Reload history after each command (needed to share history across shells live)
# export PROMPT_COMMAND="history -a; history -c; history -r; $PROMPT_COMMAND"

# Append dirname to window title if WMII_IS_RUNNING
WMII_IS_RUNNING=`ps a | grep wmii | awk '/[^"grep"] wmii$/'`
if [ -n "$WMII_IS_RUNNING" ]
then
  PROMPT_COMMAND='dirs | wmiir write /client/sel/label'
fi

export XDG_CONFIG_HOME="~/.local/share"

# If the command-line has an empty entry, don't try to autocomplete with tab
shopt -s no_empty_cmd_completion
# Enable auto cding, so you don't have to use "cd /the/dir" just "/the/dir"
shopt -s autocd
# Enable directory autocorrection
shopt -s cdspell dirspell
# Append history across shells
shopt -s histappend

BASH_INCLUDES_DEST="${HOME}/.bash_includes"
# Check for file and include it
[ -e "${BASH_INCLUDES_DEST}" ] && source "${BASH_INCLUDES_DEST}"

# Get proper auto-completion
if [ -f /etc/bash_completion ] && ! shopt -oq posix; then
	    . /etc/bash_completion
fi

# EOF
complete -cf sudo
complete -cf sudo
